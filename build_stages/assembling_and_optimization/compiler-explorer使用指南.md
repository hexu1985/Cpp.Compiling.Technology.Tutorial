好的，Compiler Explorer（通常被称为 Godbolt.org，以其创建者 Matt Godbolt 的名字命名）是一个极其强大的工具，它允许你实时查看高级语言（如 C、C++、Rust、Go 等）代码被编译成的汇编语言。这对于理解编译器如何工作、优化代码以及进行底层调试非常有用。

以下是详细的使用说明和技巧。

### 1. 访问网站

主站点是：**[https://godbolt.org/](https://godbolt.org/)**

它还有一个流行的别名：**[https://compiler-explorer.com/](https://compiler-explorer.com/)**

两个地址指向同一个网站。

---

### 2. 界面概览

界面主要分为三个面板（可以拖动分隔线调整大小）：

1.  **左侧面板（代码编辑器）**：在这里编写你的源代码。
2.  **中间面板（汇编输出）**：这里显示编译器生成的汇编代码。
3.  **右侧面板（输出和工具）**：这里可以显示程序的执行输出、编译日志、以及一些工具选项。

---

### 3. 基本使用步骤

#### a. 选择语言和编译器

*   在代码编辑器上方，有一个下拉菜单。
*   **Language**：选择你的编程语言（如 C++, C, Rust, Go, D, Haskell 等）。
*   **Compiler**：选择特定的编译器及其版本（如 `x86-64 gcc (trunk)`, `x86-64 clang 17.0.1`, `ARM64 msvc v19.latest` 等）。网站提供了从非常老的到最新的（甚至每日构建的）编译器版本。

#### b. 编写代码

在左侧的编辑器中输入你的代码。一个简单的例子：
```cpp
int square(int num) {
    return num * num;
}

int main() {
    return square(42);
}
```

#### c. 查看汇编输出

一旦你输入代码，中间面板会自动更新，显示生成的汇编代码。如果没有自动更新，可以检查右上角的“Auto update”框是否被选中。

#### d. 理解汇编输出

*   **颜色高亮**：汇编代码中的行会与源代码中的行用相同的颜色高亮显示。这帮助你直观地看到哪行源代码生成了哪些汇编指令。
*   **过滤器**：在汇编面板上方，有一排非常有用的按钮：
    *   **`#`**： 显示指令的二进制编码（机器码）。
    *   **`Δ`**： 显示指令的字节长度。
    *   **`Label`**： 显示或隐藏标签。
    *   **`Directives`**： 显示或隐藏汇编指令（如 `.section .text` 等），隐藏它们可以让代码更清晰。
    *   **`Comments`**： 编译器生成的注释，通常非常有用，解释了寄存器里是什么（例如 `` ` parameter `num` in %edi``）。
    *   **`Intel asm`**： 切换 Intel 和 AT&T 汇编语法格式（根据你的偏好选择）。
    *   **`Demangle`**： 对 C++ 修饰过的名称进行反修饰，让函数名更易读。
    *   **`Library functions`**： 显示或隐藏库函数的代码（如 `printf`, `malloc` 的实现）。通常应该隐藏，否则输出会非常长。
    *   **`Filter`**： 输入文本，只显示包含该文本的汇编行。例如，输入 `square` 可以只查看与 `square` 函数相关的汇编。

---

### 4. 高级功能与技巧

#### a. 添加编译器选项

在编译器名称旁边有一个输入框，你可以添加任何编译器标志。

*   **优化级别**：最常用的选项，例如 `-O0`（无优化），`-O1`, `-O2`, `-O3`, `-Os`（优化大小），`-Og`（优化调试体验）。**尝试不同的 `-O` 级别是学习编译器优化的最佳方式**。
*   **架构特定选项**：例如 `-march=native` 来为特定架构生成最佳代码。
*   **其他标志**：如 `-std=c++20` 来指定语言标准。

#### b. 添加命令行参数和自定义执行脚本

如果你的程序需要输入，或者你想测试它的输出：
1.  点击右上角的 **“Add new...”** 按钮。
2.  选择 **“Execution only”** 或 **“Compile and run”**。
3.  这会在右侧打开一个新窗格，你可以在 “Stdin” 中输入程序所需的输入，或者在 “Command line args” 中输入命令行参数。
4.  点击运行按钮，你将在下方看到程序的输出和返回值。

#### c. 多文件支持（“#include” 本地文件）

如果你想测试一个包含多个文件的项目：
1.  点击左上角的 **“Add new...”** 按钮。
2.  选择 **“Source file”**。
3.  你可以给新文件命名（如 `helper.h` 或 `helper.cpp`）。
4.  在主文件中，使用 `#include "helper.h"` 即可。Compiler Explorer 会在后台自动模拟文件系统。

#### d. 差异视图（Diff View）

这是一个杀手级功能，可以比较两个编译器或两种选项的差异。

1.  点击编译器名称旁边的 **“Diff”** 按钮（两个相交的圆圈）。
2.  它会为当前编译器添加一个对比列。
3.  你可以为这两列选择不同的编译器或不同的编译器选项。
4.  汇编输出会并排显示，不同的行会高亮显示，让你一目了然地看出区别。

#### e. 共享你的成果

*   当你配置好一个有趣的例子后，可以点击顶部的 **“Share”** 按钮。
*   这会生成一个短链接（如 `https://godbolt.org/z/zf3hjPb3M`），你可以将其发给别人。他们打开链接后会看到和你完全一样的设置和代码。

#### f. 主题和设置

*   点击右上角的齿轮图标 **“Settings”** 可以进行详细配置。
*   你可以更改主题（亮色/暗色）、字体、编辑器键绑定（Vim/Emacs/VSCode 等）、以及其他默认行为。

---

### 5. 常用场景示例

1.  **学习优化**：写一个简单的函数，然后逐步提高 `-O` 优化级别，观察编译器是如何巧妙地重写你的代码的。
2.  **验证代码开销**：想知道一个 `if` 语句或一个虚函数调用在汇编层面有多“贵”？把它写进去看看！
3.  **检查未定义行为**：有时奇怪的汇编输出是由于未定义行为导致的，这可以帮助你发现代码中的隐患。
4.  **对比编译器和架构**：用 Diff 视图对比 GCC 和 Clang 对同一段代码的编译结果，或者对比 x86 和 ARM 架构的差异。
5.  **理解 C++ 特性**：看看 `lambda` 表达式、`std::function`、`range-based for loop` 等在底层是如何实现的。

### 总结

Compiler Explorer 是程序员，尤其是从事系统编程、性能优化和编译器开发人员的“神器”。它的核心价值在于**即时反馈**，将高级语言和底层机器指令之间的抽象层透明化，极大地加深了我们对代码执行的理解。

最好的学习方式就是亲自上手尝试！写一些简单的代码，改变选项，观察输出，你很快就会掌握它的精髓。
